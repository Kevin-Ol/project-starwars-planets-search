(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),u=a(7),c=a.n(u),l=(a(15),Object(n.createContext)());var o=function(){var e=Object(n.useContext)(l),t=e.filters.order,a=t.column,u=t.sort,c=e.data.tableHeadData,o=e.filteredList;return o.sort((function(e,t){return Number(e[a])?e[a]-t[a]:function(e,t){if(e[a]<t[a]){return-1}return e[a]>t[a]?1:0}(e,t)})),"DESC"===u&&o.reverse(),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,c.map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,o.map((function(e,t){return r.a.createElement("tr",{key:t},c.map((function(t,a){return"name"===t?r.a.createElement("td",{key:a,"data-testid":"planet-name"},e[t]):"films"===t?r.a.createElement("td",{key:a,"data-testid":"planet-name",className:"films"},e[t].join(" ")):r.a.createElement("td",{key:a},e[t])})))}))))},i=a(1);var s=function(){var e=["population","orbital_period","diameter","rotation_period","surface_water"],t=Object(n.useContext)(l),a=t.addFilter,u=t.rmvFilter,c=t.handleOrder,o=t.setName,s=t.data.tableHeadData,m=t.filters,f=m.filterByNumericValues,d=m.filterByName.name,p=Object(n.useState)(e[0]),b=Object(i.a)(p,2),v=b[0],E=b[1],j=Object(n.useState)("maior que"),O=Object(i.a)(j,2),h=O[0],y=O[1],C=Object(n.useState)(""),k=Object(i.a)(C,2),S=k[0],g=k[1],w=Object(n.useState)("name"),x=Object(i.a)(w,2),N=x[0],D=x[1],F=Object(n.useState)("ASC"),q=Object(i.a)(F,2),A=q[0],B=q[1],L=e.filter((function(e){return!f.map((function(e){return e.column})).includes(e)}));return Object(n.useEffect)((function(){return E(L[0])}),[f]),r.a.createElement("header",null,r.a.createElement("h1",null,"Starwars Planets Search"),r.a.createElement("input",{type:"text",placeholder:"Digite um planeta","data-testid":"name-filter",value:d,onChange:function(e){var t=e.target.value;return o(t)}}),r.a.createElement("div",null,r.a.createElement("select",{"data-testid":"column-sort",value:N,onChange:function(e){var t=e.target.value;return D(t)}},s.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("label",{htmlFor:"ASC"},r.a.createElement("input",{type:"radio",id:"ASC",name:"sort",value:"ASC","data-testid":"column-sort-input-asc",onClick:function(e){var t=e.target.value;return B(t)}}),"Crescente"),r.a.createElement("label",{htmlFor:"DESC"},r.a.createElement("input",{type:"radio",id:"DESC",name:"sort",value:"DESC","data-testid":"column-sort-input-desc",onClick:function(e){var t=e.target.value;return B(t)}}),"Decrescente"),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:function(){return c({column:N,sort:A})}},"Ordenar")),r.a.createElement("div",null,r.a.createElement("select",{"data-testid":"column-filter",value:v,onChange:function(e){var t=e.target.value;return E(t)}},L.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("select",{"data-testid":"comparison-filter",value:h,onChange:function(e){var t=e.target.value;return y(t)}},["maior que","menor que","igual a"].map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("input",{type:"number",min:"0","data-testid":"value-filter",value:S,onChange:function(e){var t=e.target.value;return g(t)}}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){S&&a({column:v,comparison:h,value:S})}},"Filtrar")),f.map((function(e,t){return r.a.createElement("div",{"data-testid":"filter",key:t},r.a.createElement("p",null,"Remove",r.a.createElement("strong",null," ".concat(e.column," ")),"filter"),r.a.createElement("button",{type:"button",onClick:function(){return u(e)}},"X"))})))},m=a(9),f=a(3),d=a(5),p=a.n(d),b=a(8);var v=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],u=Object(n.useState)([]),c=Object(i.a)(u,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi-trybe.herokuapp.com/api/planets/",e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n=a.results,u=n.map((function(e){return delete e.residents,e})),r(u),o(Object.keys(u[0]));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),[a,l]};var E=function(e){var t=e.children,a=v(),u=Object(i.a)(a,2),c=u[0],o=u[1],s=Object(n.useState)(""),d=Object(i.a)(s,2),p=d[0],b=d[1],E=Object(n.useState)([]),j=Object(i.a)(E,2),O=j[0],h=j[1],y=Object(n.useState)({column:"name",sort:"ASC"}),C=Object(i.a)(y,2),k=C[0],S=C[1],g=Object(n.useState)([]),w=Object(i.a)(g,2),x=w[0],N=w[1];Object(n.useEffect)((function(){var e=Object(f.a)(c);p&&(e=e.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())}))),O&&O.forEach((function(t){var a=t.column,n=t.comparison,r=t.value;e=e.filter((function(e){return"maior que"===n?Number(e[a])>r:"menor que"===n?Number(e[a])<r:e[a]===r}))})),N(Object(f.a)(e))}),[c,p,O]);var D={filters:{filterByName:{name:p},filterByNumericValues:O,order:k},data:{planets:c,tableHeadData:o},filteredList:x,addFilter:function(e){return h([].concat(Object(f.a)(O),[e]))},rmvFilter:function(e){return h(Object(f.a)(O.filter((function(t){return t.column!==e.column}))))},handleOrder:function(e){return S(Object(m.a)({},e))},setName:b};return r.a.createElement(l.Provider,{value:D},t)};var j=function(){return r.a.createElement(E,null,r.a.createElement(s,null),r.a.createElement(o,null))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.4c6df014.chunk.js.map